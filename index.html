<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Document</title>
    <style>
        :root {
            --ticket-width: 85vw;
            --ticket-max-width: 350px;
            --cut-size: 100px;
        }

        * {
            user-select: none;
            /* Modern browsers */
            -webkit-user-select: none;
            /* Safari */
            -ms-user-select: none;
            /* IE/Edge */
        }

        body {
            margin: 0px;
            padding: 0px;

            font-family: Helvetica;
            /* height: 100vh; */
        }

        #mobile_screen {}


        #background {
            display: flex;
            flex-direction: column;

            align-items: center;
            /* justify-content: center; */
            background-color: #f7d9d9;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }

        nav {
            display: flex;
            align-items: center;

            /* border: 1px solid black; */

            margin: 10px;
            height: 30px;
            min-width: auto;
            width: 100%;
            /* font-size:small; */
            font-style: bold;
        }

        nav p {
            position: relative;
            left: 30px;
        }

        nav #a1 {
            position: absolute;
            right: 120px;
            color: black;
        }

        nav #a2 {
            position: absolute;
            right: 30px;
            color: black;
        }

        #ticket {
            background-color: white;
            border-radius: 10px;
            height: 500px;
            max-width: var(--ticket-max-width);
            width: var(--ticket-width);
            /* max-width: 300px; */
            margin-top: 10vh;
            position: relative;
            overflow: hidden;
        }

        #heading {
            padding: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #E53935;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            color: white;
            font-size: 20px;
        }

        #pass_details_div {
            display: flex;
            margin: 10px;
        }

        .pass_details {
            /* border: 1px solid black; */
            margin: 10px;
        }

        #pass_time {
            display: flex;
            margin-top: 20px;
            gap: 10px;
        }

        @keyframes upward_backward {
            0% {
                height: 140px;
            }

            50% {
                height: 180px;
            }

            100% {

                height: 140px;
                /* transform: translateZ(100px); */
            }
        }

        #logo {
            /* border: 1px solid; */
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin: 55px;
            /* animation: upward_backward 4s ease-in infinite; */
        }

        #logo img {
            padding: 0px;
            margin: 0px;
            height: 100%;
            position: absolute;
            /* position: relative; */
            /* height: 130px; */
            animation: upward_backward 3s ease-in-out infinite;
        }


        .sub_headings {
            font-size: small;
            opacity: 0.5;
            margin: 0px;
            margin-bottom: 5px;
        }


        .bold_details {
            margin: 0px;
            font-weight: bolder;
            font-size: 20px;
        }

        #code_number {
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.6;
        }

        .time_date {
            font-size: small;
            font-weight: bold;
            margin: 0px;
        }

        #qr_code_icon {
            position: absolute;
            bottom: 10px;
            border-radius: 10px;
            padding: 10px;
            width: 85vw;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #00a36c;
            color: #00a36c;
            background-color: #dFF7E7;
            font-weight: bold;
        }

        #qr_code_icon img {
            padding: 0px;
            margin: 0px;
            height: 25px;
            position: relative;
            margin-right: 10px;
            /* height: 130px; */
        }

        #qr_code {
            position: absolute;
            top: 30%;
            left: 10px;
            height: 300px;
            width: 300px;
            display: none;
        }

        #qr_code img {
            position: relative;
            height: 100%;
        }

        #qr_code p {
            position: absolute;
            top: 30px;
            right: 10px;
        }

        #cuts {
            /* height: 100px; */
            /* border: 1px solid black; */
            display: flex;
            /* justify-content: center; */
            align-items: center;
            max-width: var(--ticket-max-width);
            width: var(--ticket-width);
        }

        #left_cut {
            margin: 0px;
            padding: 0px;
            width: 30px;
            height: 30px;
            /* border: 1px solid black; */
            border-radius: 100%;

            background-color: #f7d9d9;
            position: absolute;
            left: -15px;
            /* top: -390px; */
            /* left: 175px;  */
        }



        #right_cut {
            margin: 0px;
            padding: 0px;
            width: 30px;
            height: 30px;
            /* border: 1px solid black; */
            border-radius: 100%;

            background-color: #f7d9d9;

            position: absolute;
            right: -15px;
            /* top: -420px;
            left: -175px; */
        }

        #dot_line {
            margin: 0px;

            max-width: var(--ticket-max-width);
            width: var(--ticket-width);

            height: 2px;
            background-image: repeating-linear-gradient(to right, black 8px, black 12px, transparent 10px, transparent 18px);
            opacity: 0.2;
            position: relative;
            /* left: 15px; */
            /* position: absolute;
            top: 300px;
            left: 100px; */

        }

        .red-stripe {
            background-color: #E53935;
            opacity: 0.9;
            text-align: center;
            color: white;
        }

        #timer {
            background-color: rgb(238, 238, 238);
            position: absolute;
            bottom: 0px;
            /* overflow: hidden; */
            width: 100%;
            text-align: center;
        }
    </style>

</head>

<body>
    <div id="mobile_screen">

        <div id="background">

            <nav>
                <p onclick="fullScreen()">X</p>
                <a id="a1" href="">Need Help?</a>
                <a id="a2" href="">All passes</a>

            </nav>
            <div id="ticket" onclick="fullScreen()">
                <div id="heading">पुणे महानगर परिवहन महामंडळ लि.</div>
                <div id="pass_details_div">
                    <div class="pass_details">
                        <p class="sub_headings">Pass Type</p>
                        <p class="bold_details">PMC and PCMC</p>
                    </div>

                    <div class="pass_details">
                        <p class="sub_headings">ID</p>
                        <p class="bold_details">5642</p>
                    </div>
                    <div class="pass_details">
                        <p class="sub_headings">Fare</p>
                        <p class="bold_details">₹50</p>
                    </div>
                </div>


                <div id="cuts">
                    <div id="dot_line"></div>
                    <div id="left_cut"></div>
                    <div id="right_cut"></div>
                </div>



                <div id="pass_time">
                    <div class="pass_details">
                        <p class="sub_headings">Booking Time</p>
                        <p class="time_date">16 Apr,25 | 05:22 AM</p>
                    </div>
                    <div class="pass_details">
                        <p class="sub_headings">Validity Time</p>
                        <p class="time_date">16 Apr,25 | 05:22 AM</p>
                    </div>
                </div>
                <div id="code_number">
                    <p>24030128258C3JNV</p>
                </div>

                <div id="cuts">
                    <div id="dot_line"></div>
                </div>
                <div class="red-stripe">One Day Pass</div>

                <div id="logo">
                    <img src="pmpml_logo.png" alt="">
                </div>
                <div id="timer">
                    here
                </div>
            </div>

            <div id="qr_code_icon" onclick="show_qr()">
                <img src="qr-code-icon.png" alt="">
                Show QR Code
            </div>


            <div id="qr_code">
                <img src="qr-code.jpg" alt="">
                <p onclick="hide_qr()">X</p>
            </div>

        </div>


    </div>

    <script>

        const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
            "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

        const today = new Date();
        const date = today.getDate();
        const year = today.getFullYear();
        const month = monthNames[today.getMonth()];

        const booking_time_eles = document.getElementsByClassName('time_date');

        const id_ele = document.getElementsByClassName('bold_details')[1];

        booking_time_eles[0].innerHTML = `${date} ${month}, ${year % 100} | 09:32 AM`;
        booking_time_eles[1].textContent = `${date} ${month}, ${year % 100} | 11:59 PM`;

        const qr_code_ele = document.getElementById('qr_code');

        function show_qr() {
            qr_code_ele.style.display = 'block';
        }
        function hide_qr() {
            qr_code_ele.style.display = 'none';
        }

        function fullScreen() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.webkitRequestFullscreen) {
                elem.webkitRequestFullscreen(); // Safari
            } else if (elem.msRequestFullscreen) {
                elem.msRequestFullscreen(); // IE11
            }
        }

        const urlString = new URLSearchParams(window.location.search);

        const ticket_id = urlString.get('id');
        const ticket_time = urlString.get('time');

        if (ticket_id !== null && ticket_id != '') {
            id_ele.innerText = ticket_id;
        }

        if (ticket_time !== null && ticket_time != '') {
            ticket_time.innerText =
                booking_time_eles[0].innerHTML = `${date} ${month}, ${year % 100} | ${ticket_time} AM`;
        }
        const timerEle = document.getElementById('timer');

        function updateCountdown() {
            const now = new Date();
            const target = new Date();

            // Set target to upcoming midnight (12:00:00 AM)
            target.setHours(24, 0, 0, 0); // 24:00 is equivalent to 00:00 next day

            const diff = target - now; // time left in ms

            const hours = String(Math.floor(diff / (1000 * 60 * 60))).padStart(2, '0');
            const minutes = String(Math.floor((diff / (1000 * 60)) % 60)).padStart(2, '0');
            const seconds = String(Math.floor((diff / 1000) % 60)).padStart(2, '0');

            timerEle.textContent = `${hours}:${minutes}:${seconds}`;
        }

        // Initial call and then every 1 second
        updateCountdown();
        setInterval(updateCountdown, 1000);

    </script>

</body>

</html>